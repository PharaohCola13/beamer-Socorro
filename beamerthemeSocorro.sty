\mode<presentation>

\usepackage{xcolor}
\usepackage{tikz}
\usepackage{xstring}
\usepackage{graphicx, float}
\usepackage{palatino}
\usepackage{qrcode}
\usepackage[super]{nth}
\usepackage{pgfpages}
\usepackage{setspace}
\usepackage{varwidth}
\usepackage{multicol}

\newif\ifbeamer@secheader
\beamer@secheaderfalse
\beamer@compresstrue

\DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\DeclareOptionBeamer{tbkgrd}{\newcommand{\tbkgrd}{#1}}
\DeclareOptionBeamer{tslide}{\newcommand{\tslide}{#1}}
\DeclareOptionBeamer{notes}{\setbeameroption{show notes on second screen=right}\setbeamertemplate{note page}{\pagecolor{white}\insertnote}}
\ProcessOptionsBeamer

\newlength{\spce}
\setlength{\spce}{0.5cm}
\newcommand{\vtab}[1]{\vspace*{#1\spce}}
\newcommand{\htab}[1]{\hspace*{#1\spce}}

\AtBeginNote{
    \vspace{0.325cm}
    \usebeamerfont{section in head/foot}
    \textbf{\insertframetitle}\hfill\insertsubsection
    \par\smallskip
    \hrule
    \footnotesize
}


\let\insertconference\relax
\newcommand\conference[1]{\def\insertconference{#1}}

\defbeamertemplate*{title page}{socorro}[1][]{
    \usebeamercolor[fg]{palette primary}
   \pagecolor{bg}
  \begingroup
    \centering
    \begin{beamercolorbox}[sep=3pt,center,center]{titlepage}
      \usebeamerfont{title}\Large\textbf{\inserttitle}\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\small\textit\insertsubtitle\par}%
      \fi%     
    \end{beamercolorbox}%
    \vskip1.5em\par
    \hrule\vskip1.5em\par%
    \begin{beamercolorbox}[sep=0pt,right,#1]{author}
      \usebeamerfont{author}\scriptsize\insertauthor
    \end{beamercolorbox}\vskip0.5em%
    \begin{beamercolorbox}[sep=0pt,right,#1]{institute}
      \usebeamerfont{institute}\scriptsize\insertinstitute
    \end{beamercolorbox}\vskip1.0cm%
    \begin{beamercolorbox}[sep=0pt,center,#1]{conference}
      \usebeamerfont{conference}\scriptsize\insertconference\\\usebeamerfont{date}\scriptsize\insertdate
    \end{beamercolorbox}

    {\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
  \endgroup
  \vfill
}

\setbeamersize{text margin left = 0.2in, text margin right = 0.2in}

\defbeamertemplate*{background canvas}{image,west}{%
    \begin{tikzpicture}[remember picture,overlay]
        \node[at=(current page.west), opacity=1]{
            \includegraphics[width=\paperwidth,
                             height=\paperheight]{\tbkgrd}
        };
    \end{tikzpicture}
}

\defbeamertemplate*{background canvas}{image,east}{%
    \setbeamertemplate{title page}[socorro][right]
    \begin{tikzpicture}[remember picture,overlay]
        \node[at=(current page.east), opacity=1]{
            \includegraphics[width=\paperwidth,
                             height=\paperheight]{\tbkgrd}
        };
    \end{tikzpicture}
}

\BeforeBeginEnvironment{frame}{%
  \setbeamercovered{invisible}%
  \setbeamertemplate{background canvas}[color]%
}

\defbeamertemplate*{background canvas}{color}{%
  \ifbeamercolorempty[bg]{background canvas}{}{\color{bg}\vrule width\paperwidth height\paperheight}%
}

\newcommand{\titleslide}{
    \IfEqCase{\tslide}{
    {east}{
        \define@key{beamerframe}{image}[true]{%
            \setbeamertemplate{background canvas}[image,west]%
        }
        \setbeamertemplate{title page}[socorro][left]
        \begin{frame}[plain, image]
            \begin{columns}
                \begin{column}{0.5\textwidth}\end{column}
                \begin{column}{0.5\textwidth}
                    \titlepage
                \end{column}
            \end{columns}
        \end{frame}
    }{west}{
        \define@key{beamerframe}{image}[true]{%
            \setbeamertemplate{background canvas}[image,east]%
        }
        \setbeamertemplate{title page}[socorro][right]
        \begin{frame}[plain, image]
            \begin{columns}
                \begin{column}{0.5\textwidth}
                    \titlepage
                \end{column}
                \begin{column}{0.5\textwidth}\end{column}
            \end{columns}
        \end{frame}
    }}
}

\newcommand{\prezrule}[2]{
{\usebeamercolor[bg]{palette primary}
\begin{center}
\vspace*{#2}
\textcolor{bg}{\rule{#1\textwidth}{1px}}
\vspace*{#2}
\end{center}
}}

\newcommand{\contactentry}[2]{
     {\footnotesize #1\\\vtab{-0.25}{\scriptsize\url{#2}}}\\
}

\mode
<all>
