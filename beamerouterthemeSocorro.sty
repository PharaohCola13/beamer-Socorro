
\newcommand{\secsty}{none}
\newcommand{\framesty}{socorro}
\newcommand{\footsty}{socorro}
\newcommand{\headsty}{none}

\DeclareOptionBeamer{section-style}{\renewcommand{\secsty}{#1}}
\DeclareOptionBeamer{frame-style}{\renewcommand{\framesty}{#1}}
\DeclareOptionBeamer{footer-style}{\renewcommand{\footsty}{#1}}
\DeclareOptionBeamer{header-style}{\renewcommand{\headsty}{#1}}

\ProcessOptionsBeamer

\setbeamertemplate{navigation symbols}{}

\usepackage{environ}
\usepackage{relsize}
\NewEnviron{fitbox}[2]{%
    \minipage{#1}%
        \sbox0{\minipage{#1}\strut\BODY\strut\endminipage}%
        \Gscale@div\factor{#2}{\dimexpr\ht0+\dp0\relax}%
        \relscale{\factor}%
        \BODY
    \endminipage
}

% \defbeamertemplate*{section page}{default}[1][]
% {
%   \centering
%     \begin{beamercolorbox}[sep=8pt,center,#1]{section title}
%       \usebeamerfont{section title}\insertsection\par
%     \end{beamercolorbox}
% }
% \newcommand*{\sectionpage}{\usebeamertemplate*{section page}}

\defbeamertemplate*{frametitle}{socorro}{
    \hspace*{-0.7cm}
    % wd=0.33\paperwidth
    \begin{beamercolorbox}[sep=0cm,ht=1cm,wd=0.5\paperwidth]{frametitle}
        \begin{flushright}
            \begin{tabular}{l}
               \vspace*{-0.2cm}
                \usebeamerfont{section name}\textbf{\insertsectionhead}
            \end{tabular}
        \end{flushright}
    \end{beamercolorbox}
    % ,wd=0.45\paperwidth
    \begin{beamercolorbox}[sep=0cm,ht=1cm,wd=0.45\paperwidth]{subframetitle}
        \begin{flushleft}
            \begin{tabular}{l}
                \vspace*{-0.2cm}
                \usebeamerfont{section name}\textbf{\insertsubsectionhead}
            \end{tabular}
        \end{flushleft}
    \end{beamercolorbox}
}

\defbeamertemplate*{frametitle}{empty}{}

\defbeamertemplate*{headline}{socorro}{%
  \hbox{%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,right]{frametitle}%
    \usebeamerfont{section in head/foot}\insertsectionhead\hspace*{2ex}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,left]{subframetitle}%
    \usebeamerfont{subsection in head/foot}\hspace*{2ex}\insertsubsectionhead
  \end{beamercolorbox}}%
  \vskip0pt%
}
\defbeamertemplate*{headline}{empty}{}

\defbeamertemplate*{footline}{socorro}{%
    \begin{beamercolorbox}[ht=0.75cm]{section in head/foot}
        \textcolor{bg}{\strut\vskip2pt\insertnavigation{\paperwidth}\strut}
    \end{beamercolorbox}%
}

\defbeamertemplate*{footline}{empty}{}

\defbeamertemplate*{section page}{socorro}{
    \begin{frame}[plain]
        \begin{beamercolorbox}[sep=0.3cm,ht=\paperheight,wd=\paperwidth]{frametitle}
            \setbeamertemplate{footline}[empty]
            \begin{tikzpicture}[remember picture,overlay]
              \node[rectangle, 
                     draw = fg,
                     line width = 0.5mm,
                     minimum width = 1.1\paperwidth, 
                     minimum height = 6cm] (r) at (current page.center) {};
    
              \node[rectangle, 
                     draw = fg,
                     line width = 1mm,
                     minimum width = 1.1\paperwidth, 
                     minimum height = 5cm] (r) at (current page.center) {};
    
              \node[rectangle, 
                     draw = fg,
                     line width = 2mm,
                     minimum width = 1.1\paperwidth, 
                     minimum height = 4cm] (r) at (current page.center) {};
    
              \node[rectangle, 
                     draw = fg,
                     line width = 3mm,
                     minimum width = 1.1\paperwidth, 
                     minimum height = 3cm] (r) at (current page.center) {};
    
              \node[rectangle, 
                     fill=fg, 
                     text=bg,
                     minimum width = 1.1\paperwidth, 
                     minimum height = 2cm] (r) at (current page.center) {\usebeamerfont{section name}\secname};
            \end{tikzpicture}
        \end{beamercolorbox}
    \end{frame}
}

\defbeamertemplate*{section page}{empty}{}

\setbeamertemplate{section page}[\secsty]
\setbeamertemplate{frametitle}[\framesty]
\setbeamertemplate{footline}[\footsty]
\setbeamertemplate{headline}[\headsty]


\AtBeginSection[]
{
    \sectionpage
}